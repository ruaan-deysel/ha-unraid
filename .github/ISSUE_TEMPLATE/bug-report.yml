name: ğŸ› Bug Report
description: Report a bug or unexpected behavior with the Unraid Integration
title: "[Bug]: "
labels: ["bug", "needs-triage"]
assignees: []

body:
  - type: markdown
    attributes:
      value: |
        ## ğŸ› Bug Report

        Thanks for taking the time to report a bug! Please fill out the form below to help us understand and fix the issue.

        **Before submitting**, please ensure you have:
        - Searched existing [open](https://github.com/ruaan-deysel/ha-unraid/issues) and [closed](https://github.com/ruaan-deysel/ha-unraid/issues?q=is%3Aissue+is%3Aclosed) issues
        - Verified you're running the latest version of the integration
        - Confirmed Unraid 7.2.0 or later (required for GraphQL API)

  - type: textarea
    id: description
    attributes:
      label: ğŸ› Bug Description
      description: "Clear and concise description of what the bug is"
      placeholder: |
        Describe what's happening and what you expected to happen instead.

        Example: "The CPU temperature sensor shows 'unavailable' after every Home Assistant restart, but works fine after reloading the integration."
    validations:
      required: true

  - type: textarea
    id: reproduction_steps
    attributes:
      label: ğŸ”„ Steps to Reproduce
      description: "Detailed steps to reproduce the issue"
      placeholder: |
        1. Go to Settings â†’ Devices & Services â†’ Unraid
        2. Click on the Unraid device
        3. Observe that CPU temperature shows 'unavailable'
        4. Reload the integration
        5. CPU temperature now shows correctly
    validations:
      required: true

  - type: textarea
    id: expected_behavior
    attributes:
      label: âœ… Expected Behavior
      description: "What should happen instead?"
      placeholder: |
        CPU temperature should show correctly after Home Assistant restart without needing to reload the integration.
    validations:
      required: true

  - type: dropdown
    id: bug_category
    attributes:
      label: ğŸ“‚ Bug Category
      description: "What area of the integration is affected?"
      options:
        - "Setup/Configuration - Config flow, API connection"
        - "System Monitoring - CPU, RAM, uptime sensors"
        - "Storage Monitoring - Array, disk sensors"
        - "Docker Management - Container switches and status"
        - "VM Management - Virtual machine switches and status"
        - "UPS Monitoring - UPS sensors"
        - "Entity Issues - Missing, unavailable, or incorrect entities"
        - "Performance - Slow updates, high resource usage"
        - "Other - Something else"
    validations:
      required: true

  - type: input
    id: unraid_version
    attributes:
      label: ğŸ–¥ï¸ Unraid Version
      description: "Your Unraid server version (must be 7.2.0+)"
      placeholder: "7.2.0"
    validations:
      required: true

  - type: input
    id: integration_version
    attributes:
      label: ğŸ“¦ Integration Version
      description: "Version of the Unraid Integration (check in HACS or manifest.json)"
      placeholder: "2025.12.0"
    validations:
      required: true

  - type: input
    id: ha_version
    attributes:
      label: ğŸ  Home Assistant Version
      description: "Your Home Assistant version"
      placeholder: "2025.1.0"
    validations:
      required: true

  - type: dropdown
    id: ha_installation_type
    attributes:
      label: ğŸ—ï¸ Home Assistant Installation Type
      description: "How is Home Assistant installed?"
      options:
        - "Home Assistant OS (HAOS)"
        - "Home Assistant Container (Docker)"
        - "Home Assistant Supervised"
        - "Home Assistant Core (Python venv)"
        - "Other"
    validations:
      required: true

  - type: textarea
    id: logs
    attributes:
      label: ğŸ“‹ Relevant Logs
      description: |
        Home Assistant logs related to the issue. Enable debug logging first:

        ```yaml
        logger:
          logs:
            custom_components.unraid: debug
        ```

        Then reload the integration and reproduce the issue.
      placeholder: |
        ```
        2025-12-27 10:30:00 ERROR (MainThread) [custom_components.unraid] ...
        2025-12-27 10:30:01 DEBUG (MainThread) [custom_components.unraid.api] ...
        ```
      render: shell
    validations:
      required: false

  - type: textarea
    id: network_setup
    attributes:
      label: ğŸŒ Network Setup
      description: "Information about your network configuration"
      placeholder: |
        - Unraid server IP: 192.168.1.100
        - Home Assistant IP: 192.168.1.50
        - Same subnet: Yes/No
        - VLANs or firewalls: None/Details
        - Using reverse proxy: No/Details
      render: markdown
    validations:
      required: false

  - type: textarea
    id: additional_context
    attributes:
      label: ğŸ“ Additional Context
      description: "Any other relevant information"
      placeholder: |
        - Recent changes to your Unraid or HA setup
        - Workarounds you've tried
        - Screenshots of error messages
        - Specific entities affected
        - Docker containers or VMs involved
      render: markdown
    validations:
      required: false

  - type: checkboxes
    id: checklist
    attributes:
      label: âœ… Checklist
      description: "Please confirm you have done the following:"
      options:
        - label: "I have searched existing [open](https://github.com/ruaan-deysel/ha-unraid/issues) and [closed](https://github.com/ruaan-deysel/ha-unraid/issues?q=is%3Aissue+is%3Aclosed) issues to ensure this isn't a duplicate"
          required: true
        - label: "I am running Unraid 7.2.0 or later (required for GraphQL API)"
          required: true
        - label: "I have reproduced the issue on the latest version to confirm it still exists"
          required: true
        - label: "I have tried restarting Home Assistant"
          required: false
        - label: "I have tried reloading the Unraid integration"
          required: false
        - label: "I have enabled debug logging and included relevant logs"
          required: false
